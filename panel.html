
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mesai Takip Paneli</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-white text-gray-800 dark:from-gray-900 dark:to-gray-800 dark:text-white transition duration-300 ease-in-out">

  <!-- Navbar -->
  <nav class="bg-white/80 dark:bg-gray-800/70 backdrop-blur-md shadow-md px-4 py-3 flex justify-between items-center">
    <div class="text-lg font-bold">Mesai Takip</div>
    <button class="text-2xl md:hidden" id="menuToggle">☰</button>
    <div class="hidden md:flex items-center gap-6 text-sm text-gray-700 dark:text-gray-300 ml-auto">
      <div class="flex items-center gap-1 bg-white/50 dark:bg-gray-700/50 px-3 py-1 rounded-lg shadow-sm mb-4">
        <span id="kullaniciAdi">👤 Kullanıcı</span>
      </div>
      <div class="flex flex-col items-start gap-1 bg-white/50 dark:bg-gray-700/50 px-3 py-2 rounded-lg shadow-sm" id="clock">
        <div class="flex items-center gap-2">
          <span>📅</span><span id="date"></span><span class="ml-1 font-semibold" id="day"></span>
        </div>
        <div class="flex items-center gap-2">
          <span>🕒</span><span id="time"></span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar (Desktop) -->
  <aside class="bg-white/70 dark:bg-gray-800/60 backdrop-blur-md md:w-64 w-full md:min-h-screen p-4 space-y-4 hidden md:block" id="sidebar">
    <ul class="space-y-3 text-[15px] font-medium leading-5">
      <li><span class="cursor-pointer" onclick="showPage('dashboard')">🏠 Dashboard</span></li>
      <li><span class="cursor-pointer" onclick="showPage('mesai')">⏱️ Mesai Takip</span></li>
      <li><span class="cursor-pointer" onclick="showPage('plan')">🗂️ İş Planım</span></li>
      <li><span class="cursor-pointer" onclick="showPage('takvim')">📅 Takvim</span></li>
      <li><span class="cursor-pointer" onclick="showPage('alarm')">⏰ Alarm</span></li>
      <li><span class="cursor-pointer" onclick="showPage('oyunlar')">🎮 Oyunlar</span></li>
      <li><span class="cursor-pointer" onclick="showPage('kayitlar')">🧾 Kayıtlar</span></li>
      <li><span class="cursor-pointer" onclick="showPage('ayarlar')">⚙️ Ayarlar</span></li>
      <li><span class="cursor-pointer" onclick="showPage('webdisk')">💾 WebDisk</span></li>
      <li><span class="cursor-pointer" onclick="showPage('hatirlaticilar')">🔔 Hatırlatıcılar</span></li>
      <li><span class="cursor-pointer" onclick="showPage('raporlar')">📈 Raporlar</span></li>
      <li><span class="cursor-pointer" onclick="showPage('asistan')">🤖 Asistan</span></li>
      <li><span class="cursor-pointer" onclick="showPage('motivasyon')">💬 Motivasyon</span></li>
      <li><button class="text-left w-full text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200" onclick="logout()">🚪 Oturumu Kapat</button></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-6">
    <div id="icerikAlani"></div>
  </main>

  <!-- Bottom Sheet Menu (Mobile) -->
  <div id="bottomMenu" class="fixed bottom-0 left-0 w-full bg-white dark:bg-gray-800 rounded-t-xl shadow-lg transform translate-y-full transition-transform duration-300 z-50 md:hidden">
    <div class="flex justify-between items-center px-4 py-3 border-b border-gray-300 dark:border-gray-700">
      <span class="text-lg font-semibold text-gray-900 dark:text-white">📋 Menü</span>
      <button id="closeMenu" class="text-xl text-gray-900 dark:text-white">✖</button>
    </div>
    <ul class="p-4 space-y-4 text-gray-800 dark:text-gray-200">
      <li onclick="showPage('dashboard'); closeMobileMenu()">🏠 Dashboard</li>
      <li onclick="showPage('mesai'); closeMobileMenu()">⏱️ Mesai Takip</li>
      <li onclick="showPage('plan'); closeMobileMenu()">🗂️ İş Planım</li>
      <li onclick="showPage('takvim'); closeMobileMenu()">📅 Takvim</li>
      <li onclick="showPage('asistan'); closeMobileMenu()">🤖 Asistan</li>
      <li onclick="logout()">🚪 Oturumu Kapat</li>
    </ul>
  </div>
  <div id="overlay" class="fixed inset-0 bg-black/40 hidden z-40 md:hidden"></div>

  <!-- Footer -->
  <footer class="fixed bottom-6 right-2 text-xs text-gray-500 dark:text-gray-400">Ver: v3.9</footer>

  <!-- Scripts -->
  <script>
    function updateClock() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('tr-TR');
      const dateString = now.toLocaleDateString('tr-TR');
      const dayNames = ["Paz", "Pzt", "Sal", "Çar", "Per", "Cum", "Cts"];
      const dayName = dayNames[now.getDay()];
      document.getElementById('time').textContent = timeString;
      document.getElementById('date').textContent = dateString;
      document.getElementById('day').textContent = "(" + dayName + ")";
    }
    setInterval(updateClock, 1000);
    updateClock();

    function logout() {
      firebase.auth().signOut().then(() => {
        sessionStorage.clear();
        window.location.href = "index.html";
      });
    }

    const menuToggle = document.getElementById("menuToggle");
    const bottomMenu = document.getElementById("bottomMenu");
    const closeMenu = document.getElementById("closeMenu");
    const overlay = document.getElementById("overlay");

    menuToggle?.addEventListener("click", () => {
      bottomMenu.classList.remove("translate-y-full");
      overlay.classList.remove("hidden");
    });
    closeMenu?.addEventListener("click", () => closeMobileMenu());
    overlay?.addEventListener("click", () => closeMobileMenu());

    function closeMobileMenu() {
      bottomMenu.classList.add("translate-y-full");
      overlay.classList.add("hidden");
    }

    const pages = {
      dashboard: `<div class="text-2xl font-bold mb-2">👋 Hoş geldin, <span id="kullaniciAdiDashboard">Kullanıcı</span>!</div>`,
      mesai: `<div class='text-xl font-semibold mb-4'>⏱️ Mesai Takip</div>`,
      plan: `<div class="text-xl font-semibold mb-4">🗂️ İş Planım</div>`,
      takvim: `<div class="text-xl font-semibold mb-4">📅 Takvim</div>`,
      asistan: `<div class="text-xl font-semibold mb-4">🤖 Asistan</div>`
    };

    function showPage(page) {
      const container = document.getElementById("icerikAlani");
      if (pages[page]) {
        container.innerHTML = pages[page];
        const dashUser = document.getElementById("kullaniciAdiDashboard");
        const email = localStorage.getItem("email");
        if (dashUser && email) {
          dashUser.innerText = email;
        }
      }
    }

    window.onload = () => {
      const email = localStorage.getItem("email");
      const span = document.getElementById("kullaniciAdi");
      if (email && span) {
        span.innerText = "👤 " + email;
      }
      showPage("dashboard");
    };
  </script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="firebase.js"></script>
</body>
</html>
